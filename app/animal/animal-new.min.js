"use strict";function AnimalNewConfig(e){e.state("animal-new",{url:"/animals/new",views:{main:{controller:"AnimalNewCtrl",templateUrl:"app/animal/animal-new.tpl.min.html"}},data:{pageTitle:"Create Animal"}})}function AnimalNewController(e,i,t,n,a,l,r,o){e.isLoggedIn=l.partial(a.isLoggedIn,e),e.isPrivilegedUser=l.partial(a.isPrivilegedUser,e),e.initRadio=o.initRadio,e.makeSticky=o.makeSticky,e.formResult={creationDate:new Date,nutrients:nutrientMasterList,isPrivate:!0},e.submit=function(){e.formResult._id=r.slugify(e.formResult.name),e.formResult.nutrients=l.pick(e.formResult.nutrients,function(e){return 0!==e.value}),e.formResult.owner=e.profile.user_id,e.isPrivilegedUser()||(e.formResult.isPrivate=!0);var t={};t[e.formResult._id]=e.formResult,n.addAnimal(t).then(function(){Messenger().post("Saved animal '"+e.formResult.name+"'"),i.go("animal-list")})}}angular.module("app.animal-new",["app.common-api","app.common-auth","ngLodash","slugifier","ui.router"]).config(AnimalNewConfig).controller("AnimalNewCtrl",AnimalNewController),AnimalNewConfig.$inject=["$stateProvider"],AnimalNewController.$inject=["$scope","$state","$timeout","APIUtil","AuthUtil","lodash","Slug","UIUtil"];